import{d as P,e as J,s as M,l as F}from"./chunk-XL46KY3Q.yPoBHZKd.js";function A(e){return!1}let s=[],c=0;const p=4;let S=0,w=e=>{let t=[],n={get(){return n.lc||n.listen(()=>{})(),n.value},lc:0,listen(r){return n.lc=t.push(r),()=>{for(let a=c+p;a<s.length;)s[a]===r?s.splice(a,p):a+=p;let i=t.indexOf(r);~i&&(t.splice(i,1),--n.lc||n.off())}},notify(r,i){S++;let a=!s.length;for(let l of t)s.push(l,n.value,r,i);if(a){for(c=0;c<s.length;c+=p)s[c](s[c+1],s[c+2],s[c+3]);s.length=0}},off(){},set(r){let i=n.value;i!==r&&(n.value=r,n.notify(i))},subscribe(r){let i=n.listen(r);return r(n.value),i},value:e};return n};const q=5,v=6,h=10;let V=(e,t,n,r)=>(e.events=e.events||{},e.events[n+h]||(e.events[n+h]=r(i=>{e.events[n].reduceRight((a,l)=>(l(a),a),{shared:{},...i})})),e.events[n]=e.events[n]||[],e.events[n].push(t),()=>{let i=e.events[n],a=i.indexOf(t);i.splice(a,1),i.length||(delete e.events[n],e.events[n+h](),delete e.events[n+h])}),$=1e3,I=(e,t)=>V(e,r=>{let i=t(r);i&&e.events[v].push(i)},q,r=>{let i=e.listen;e.listen=(...l)=>(!e.lc&&!e.active&&(e.active=!0,r()),i(...l));let a=e.off;return e.events[v]=[],e.off=()=>{a(),setTimeout(()=>{if(e.active&&!e.lc){e.active=!1;for(let l of e.events[v])l();e.events[v]=[]}},$)},()=>{e.listen=i,e.off=a}}),R=(e,t,n)=>{Array.isArray(e)||(e=[e]);let r,i,a=()=>{if(i===S)return;i=S;let f=e.map(o=>o.get());if(!r||f.some((o,_)=>o!==r[_])){r=f;let o=t(...f);o&&o.then&&o.t?o.then(_=>{r===f&&l.set(_)}):(l.set(o),i=S)}},l=w(void 0),y=l.get;l.get=()=>(a(),y());let g,x=n?()=>{clearTimeout(g),g=setTimeout(a)}:a;return I(l,()=>{let f=e.map(o=>o.listen(x));return a(),()=>{for(let o of f)o()}}),l},u=(e,t)=>R(e,t),B=(e,t)=>R(e,t,!0),b=(e={})=>{let t=w(e);return t.setKey=function(n,r){let i=t.value;typeof r>"u"&&n in t.value?(t.value={...t.value},delete t.value[n],t.notify(i,n)):t.value[n]!==r&&(t.value={...t.value,[n]:r},t.notify(i,n))},t};var d=b({isLoaded:!1,client:void 0,user:void 0,session:void 0,organization:void 0}),z=b(),m=w(null);u([d],e=>e.isLoaded);var E=B([d,z],(e,t)=>P(e.isLoaded,{session:e.session,user:e.user,organization:e.organization,client:e.client},t));u([E],e=>e.user);u([E],e=>e.session);var D=u([E],e=>e.organization),k=u([d],e=>e.client),Q=u([m],e=>e);u([k],e=>e?.sessions);var G=u([k],e=>e?.signIn),H=u([k],e=>e?.signUp),T=(e,t)=>{I(e,()=>{m.get()?.telemetry?.record(J(t))})};T(G,"$signInStore");T(H,"$signUpStore");T(D,"$organizationStore");var L=()=>{["handleRedirectCallback"].forEach(t=>{document.querySelectorAll(`[data-clerk-function-id^="clerk-${t}"]`).forEach(r=>{const i=r.getAttribute("data-clerk-function-id"),a=window.__astro_clerk_function_props?.get(t)?.get(i)??{};m.get()?.[t]?.(a)})})},N=()=>{Object.entries({"create-organization":"mountCreateOrganization","organization-list":"mountOrganizationList","organization-profile":"mountOrganizationProfile","organization-switcher":"mountOrganizationSwitcher","user-button":"mountUserButton","user-profile":"mountUserProfile","sign-in":"mountSignIn","sign-up":"mountSignUp","google-one-tap":"openGoogleOneTap",waitlist:"mountWaitlist","pricing-table":"mountPricingTable"}).forEach(([t,n])=>{document.querySelectorAll(`[data-clerk-id^="clerk-${t}"]`).forEach(i=>{const a=i.getAttribute("data-clerk-id"),l=window.__astro_clerk_component_props?.get(t)?.get(a);i&&m.get()?.[n](i,l)})})},Y=e=>{let t=!1;return n=>{if(t){const r=window.Clerk;return new Promise(i=>r?(r.loaded&&(N(),L()),i(r.loaded)):i(!1))}return t=!0,e(n)}},C;M("@clerk/astro");function O(e){return(t,n)=>{n?.__internal_metadata?.navigationType==="internal"?e(history.state,"",t):n?.windowNavigate(t)}}var K=Y(W);async function W(e){let t=window.Clerk;if(!t){if(await F(e),!window.Clerk)throw new Error("Failed to download latest ClerkJS. Contact support@clerk.com.");t=window.Clerk}return m.get()||m.set(t),C={routerPush:O(window.history.pushState.bind(window.history)),routerReplace:O(window.history.replaceState.bind(window.history)),...e},t.load(C).then(()=>{d.setKey("isLoaded",!0),Q.notify(),N(),L(),t.addListener(n=>{d.setKey("client",n.client),d.setKey("user",n.user),d.setKey("session",n.session),d.setKey("organization",n.organization)})}).catch(()=>{})}var X=e=>{const{signInUrl:t,signUpUrl:n,isSatellite:r,proxyUrl:i,domain:a,publishableKey:l,telemetry:y,...g}=e||{};return{signInUrl:t||void 0,signUpUrl:n||void 0,isSatellite:r||void 0,proxyUrl:i||void 0,domain:a||void 0,publishableKey:l||"pk_test_cG9zc2libGUtYmF0LTk4LmNsZXJrLmFjY291bnRzLmRldiQ",telemetry:y||{disabled:A(),debug:A()},...g}};function Z(e){async function t(n){const r=document.getElementById("__CLERK_ASTRO_DATA__");r&&z.set(JSON.parse(r.textContent||"{}"));const i=document.getElementById("__CLERK_ASTRO_SAFE_VARS__");let a={};i&&(a=JSON.parse(i.textContent||"{}")),await e(X({...n,...a}))}return t}var U="data-astro-transition-persist",j="data-emotion";function re(e,t){e.deselectScripts(t),e.swapRootAttributes(t);const n=document.querySelectorAll(`style[${j}]`);ee(t,Array.from(n));const r=e.saveFocus();e.swapBodyElement(t.body,document.body),r()}function ee(e,t){for(const n of Array.from(document.head.children)){const r=te(n,e);r?r.remove():t.includes(n)||n.remove()}document.head.append(...e.head.children)}function te(e,t){const n=e.getAttribute(U),r=n&&t.head.querySelector(`[${U}="${n}"]`);if(r)return r;if(e.matches("link[rel=stylesheet]")){const i=e.getAttribute("href");return t.head.querySelector(`link[rel=stylesheet][href="${i}"]`)}return null}var ie=Z(K);export{ie as r,re as s};
