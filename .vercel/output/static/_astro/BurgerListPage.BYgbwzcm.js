import{j as e,u as _,A as w,m as S,s as B,b as C}from"./supabaseClient.JcG5vpDm.js";import{r as t}from"./index.D0mNDFPE.js";import"./chunk-XL46KY3Q.yPoBHZKd.js";import"./preload-helper.BlTxHScW.js";const E=({id:n,nombre:c,descripcion:l,imagen_url:d,restaurante:i,logo_url:u,isProbada:f,alergenos:g=[]})=>e.jsxs("div",{className:"group relative rounded-xl overflow-hidden bg-white shadow-md hover:shadow-2xl transition-transform duration-300 flex flex-col h-full",children:[u&&e.jsx("div",{className:"bg-black flex justify-center items-center p-3",children:e.jsx("img",{src:u,alt:`Logo de ${i}`,className:"h-14 object-contain"})}),e.jsxs("div",{className:"relative overflow-hidden",children:[e.jsx("img",{src:d,alt:c,className:"w-full h-64 object-cover transform transition-transform duration-300 group-hover:scale-105"}),e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-30 transition duration-300"}),e.jsx("a",{href:`/burgers/${n}`,className:"whitespace-nowrap absolute bottom-4 left-1/2 transform -translate-x-1/2 translate-y-4 opacity-0 group-hover:translate-y-0 group-hover:opacity-100 bg-black text-white text-sm py-2 px-6 rounded-full transition-all duration-300",children:"Ver detalles"})]}),e.jsxs("div",{className:"p-4 flex flex-col flex-1 justify-between min-h-[220px] relative",children:[f&&e.jsx("span",{className:"absolute top-0 right-0 -translate-y-1/2 bg-green-100 text-green-800 text-xs font-semibold px-2 py-1 rounded-full shadow z-10",children:"⭐ Probada"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-xl font-bold mb-2",children:c}),e.jsx("p",{className:"text-sm text-gray-700 line-clamp-4",children:l})]}),e.jsxs("p",{className:"text-xs text-gray-500 mt-3",children:["🍴 ",i]}),e.jsx("div",{className:"mt-4 flex flex-wrap gap-2",children:g.map(r=>e.jsxs("div",{className:"relative group/alerg",children:[e.jsx("img",{src:r.icono_url,alt:r.nombre,className:"w-6 h-6 object-contain cursor-pointer transition-transform duration-200 ease-in-out hover:scale-105 hover:brightness-110"}),e.jsx("span",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-2 py-1 text-xs text-gray-700 bg-white border border-gray-200 rounded shadow-sm opacity-0 group-hover/alerg:opacity-100 pointer-events-none transition",children:r.nombre})]},r.nombre))})]})]});function A(){return e.jsxs("div",{className:"animate-pulse rounded-xl overflow-hidden bg-white shadow flex flex-col",children:[e.jsx("div",{className:"bg-black h-14"}),e.jsx("div",{className:"h-64 bg-gray-200"}),e.jsxs("div",{className:"p-4 flex flex-col gap-3",children:[e.jsx("div",{className:"h-5 bg-gray-200 rounded w-3/4"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-full"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-5/6"}),e.jsx("div",{className:"h-3 bg-gray-100 rounded w-1/2 mt-2"})]})]})}const P=6;function O(){const[n,c]=t.useState([]),[l,d]=t.useState([]),[i,u]=t.useState([]),[f,g]=t.useState(!0),[r,j]=t.useState(!1),{user:m}=_(),[p,k]=t.useState(""),[x,y]=t.useState(!1),[h,v]=t.useState(!1),b=t.useRef(null);t.useEffect(()=>{async function s(){const{data:a}=await B.from("hamburguesas").select("*, hamburguesa_alergenos(alergenos(nombre, icono_url))");c(a||[]),d((a||[]).slice(0,P)),g(!1)}s()},[]),t.useEffect(()=>{if(!m)return;async function s(){const{data:a}=await B.from("hamburguesas_probadas").select("hamburguesa_id").eq("usuario_id",m.id);u(a?.map(o=>o.hamburguesa_id)||[])}s()},[m]),t.useEffect(()=>{const s=new IntersectionObserver(a=>{a[0].isIntersecting&&!r&&l.length<n.length&&(j(!0),setTimeout(()=>{d(o=>{const L=n.slice(o.length,o.length+P);return[...o,...L]}),j(!1)},500))},{threshold:1});return b.current&&s.observe(b.current),()=>s.disconnect()},[n,r,l.length]);const N=l.filter(s=>{const a=s.nombre.toLowerCase().includes(p.toLowerCase()),o=i.includes(s.id);return x&&!o||h&&o?!1:a});return e.jsxs("div",{className:"max-w-[1200px] mx-auto px-4",children:[e.jsxs("div",{className:"text-center mt-8",children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"📜 La Carta"}),e.jsxs("p",{className:"mt-2 text-center text-lg text-gray-700",children:["Explora todas las hamburguesas que compiten en The Champions Burger 2025.",e.jsx("br",{}),"Disfruta de una selección única con ",n.length," participantes.",e.jsx("br",{}),"🍔 ¿Cuál será tu favorita hoy?"]})]}),e.jsxs("div",{className:"mt-6 mb-6 max-w-[400px] mx-auto",children:[e.jsx("input",{type:"text",placeholder:"Buscar por nombre de burger...",value:p,onChange:s=>k(s.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-purple-500"}),m&&e.jsxs("div",{className:"flex items-center justify-center gap-6 mt-4 mb-6 text-sm",children:[e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:x,onChange:()=>{y(!x),v(!1)}}),"Mostrar solo probadas"]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:h,onChange:()=>{v(!h),y(!1)}}),"Mostrar solo no probadas"]})]})]}),N.length===0?e.jsx(w,{mode:"wait",children:e.jsx(S.p,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"text-center text-gray-500 mt-10",children:p?"No se encontró ninguna burger con ese nombre.":x?"No has probado ninguna burger aún.":h?"¡Has probado todas las burgers!":"No hay burgers disponibles."},"no-results")}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8 items-stretch",children:e.jsxs(w,{mode:"popLayout",children:[N.map(s=>e.jsx(S.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.25},children:e.jsx(E,{...s,isProbada:i.includes(s.id),alergenos:s.hamburguesa_alergenos?.map(a=>a.alergenos)||[]})},s.id)),r&&l.length<n.length&&Array.from({length:3}).map((s,a)=>e.jsx(A,{},`skeleton-${a}`))]})}),e.jsx("div",{ref:b,className:"h-12"})]})}function $(){return e.jsx(C,{children:e.jsx(O,{})})}export{$ as default};
