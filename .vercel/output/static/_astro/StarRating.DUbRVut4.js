import{j as t,d as j,m as v,s as S}from"./supabaseClient.JcG5vpDm.js";import{r as a}from"./index.D0mNDFPE.js";function w(o="/"){const[l,n]=a.useState(!1),i=()=>n(!0),s=()=>n(!1);return{open:i,close:s,SignInModal:()=>l?t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:t.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-4 relative max-w-md w-full",children:[t.jsx(j,{afterSignInUrl:o}),t.jsx("button",{onClick:s,className:"absolute top-2 right-2 text-gray-600 hover:text-black text-2xl leading-none",children:"❌"})]})}):null}}function y({burgerId:o,usuarioId:l,initialRating:n,onRated:i,readOnly:s=!1,size:u="text-3xl"}){const[p,f]=a.useState(n||0),[g,d]=a.useState(null),[h,x]=a.useState(!1),[m,c]=a.useState("");async function b(e){if(s||h||!o||!l)return;x(!0);const{error:r}=await S.from("hamburguesas_probadas").update({puntuacion:e}).eq("usuario_id",l).eq("hamburguesa_id",o);x(!1),r?c("❌ Error al guardar la puntuación"):(f(e),i?.(e),c(`⭐ Has valorado esta burger con ${e} estrella${e>1?"s":""}`),setTimeout(()=>c(""),3e3))}return t.jsxs("div",{className:"flex flex-col items-center mt-2 space-y-1",children:[t.jsx("div",{className:"flex space-x-1",children:[1,2,3,4,5].map(e=>{const r=(g??p)>=e;return t.jsx(v.button,{onClick:()=>b(e),onMouseEnter:()=>!s&&d(e),onMouseLeave:()=>!s&&d(null),disabled:s,whileTap:{scale:1.3},whileHover:s?{}:{scale:1.2},className:`${u} transition-all duration-200 ${s?"cursor-default opacity-70":"cursor-pointer hover:text-yellow-500"} ${r?"text-yellow-400":"text-gray-300"}`,children:r?"★":"☆"},e)})}),m&&t.jsx("p",{className:"text-sm text-gray-500 mt-1",children:m})]})}export{y as S,w as u};
